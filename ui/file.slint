import { ScrollView } from "std-widgets.slint";

export component FileSelector inherits Window {
    preferred-width: 320px;
    preferred-height: 240px;
    background: #2e3440;
    in-out property <[string]> file-list: [];
    in-out property <int> selected-index: 0;
    out property <string> selected-file: selected-index >= 0 && selected-index < file-list.length ? file-list[selected-index] : "";
    in-out property <string> status-message: "Ready";
    callback move-up();
    callback move-down();
    callback select-file();
    callback refresh-files();
    VerticalLayout {
        padding: 4px;
        spacing: 4px;
        
        // Header
        Rectangle {
            height: 24px;
            background: #5e81ac;
            border-radius: 2px;
            Text {
                text: "SD Card Files";
                color: white;
                font-size: 24px;
                font-weight: 600;
                horizontal-alignment: center;
                vertical-alignment: center;
            }
        }
        
        // File list container
        Rectangle {
            background: #3b4252;
            border-radius: 3px;
            border-width: 1px;
            border-color: #434c5e;
            ScrollView {
                viewport-height: file-list.length * 22px;
                for file[index] in file-list: Rectangle {
                    y: index * 22px;
                    height: 22px;
                    width: parent.width - 4px;
                    x: 2px;
                    background: selected-index == index ? #81a1c1 : transparent;
                    border-radius: 2px;
                    HorizontalLayout {
                        padding-left: 6px;
                        padding-right: 6px;
                        
                        // Selection indicator
                        Rectangle {
                            width: 4px;
                            background: selected-index == index ? #88c0d0 : transparent;
                        }

                        Text {
                            text: file;
                            color: selected-index == index ? #2e3440 : #eceff4;
                            font-size: 16px;
                            vertical-alignment: center;
                            horizontal-stretch: 1;
                        }
                    }
                }
            }
        }
        
        // Status and controls
        Rectangle {
            height: 32px;
            background: #434c5e;
            border-radius: 2px;
            VerticalLayout {
                padding: 3px;
                spacing: 2px;
                Text {
                    text: status-message;
                    color: #d8dee9;
                    font-size: 10px;
                    horizontal-alignment: left;
                }

                Text {
                    text: "Item " + (selected-index + 1) + "/" + file-list.length + " â€¢ UP/DOWN/SELECT/REFRESH";
                    color: #81a1c1;
                    font-size: 9px;
                    horizontal-alignment: left;
                }
            }
        }
    }
}
